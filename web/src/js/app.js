!function(){"use strict";function e(e){const t=e.options[e.selectedIndex]?.text?.toLowerCase()||"",o=document.getElementById("item-type-row"),n=document.getElementById("transport-type-row"),a=document.getElementById("item-type"),l=document.getElementById("transport-type"),r=document.getElementById("to-department"),s=document.getElementById("from-department");"samples"===t?r&&Array.from(r.options).forEach((e=>{"pathology"===e.text.toLowerCase()&&(r.value=e.value)})):"pathology"===t&&s&&Array.from(s.options).forEach((e=>{"pathology"===e.text.toLowerCase()&&(s.value=e.value)})),t.includes("patient")?(o&&(o.style.display="none"),n&&(n.style.display=""),a&&(a.required=!1),l&&(l.required=!0)):(o&&(o.style.display=""),n&&(n.style.display="none"),a&&(a.required=!0),l&&(l.required=!1))}function t(e,t,o,n){if(!e.value)return;const a=e.options[e.selectedIndex].text.toLowerCase();let l=null;for(const e in n)if(a===e||a.includes(e)){l=n[e];break}console.log(`Selected category: "${a}", target group: "${l}"`),o.forEach((e=>{e.style.display="none",Array.from(e.querySelectorAll("option")).forEach((e=>{e.style.display="none"}))})),l?o.forEach((e=>{const t=e.label.toLowerCase().replace(/\s+/g,"-");(t===l||"transport-options"===l&&"patient-transfer"===t)&&(e.style.display="",Array.from(e.querySelectorAll("option")).forEach((e=>{e.style.display=""})),console.log(`Showing optgroup: ${e.label}`))})):(console.log("No specific match found, showing all optgroups"),o.forEach((e=>{e.style.display="",Array.from(e.querySelectorAll("option")).forEach((e=>{e.style.display=""}))}))),t.value=""}document.addEventListener("DOMContentLoaded",(function(){(function(){const e=document.getElementById("time-received");if(e){const t=()=>{const t=new Date;let o=t.getHours().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");e.value=`${o}:${n}`};t(),setInterval(t,6e4)}})(),function(){document.getElementById("task-form");const t=document.getElementById("job-category"),o=document.getElementById("pending-button"),n=document.getElementById("completed-button");o&&o.addEventListener("click",(function(e){})),n&&n.addEventListener("click",(function(e){})),t&&(t.addEventListener("change",(function(){e(this)})),t.value&&e(t))}(),document.querySelectorAll(".task-item").forEach((e=>{e.addEventListener("click",(function(){this.getAttribute("data-task-id")}))})),function(){const o=document.getElementById("job-category"),n=document.getElementById("item-type");if(o&&n){const a=n.querySelectorAll("optgroup"),l={"patient transfer":"transport-options",samples:"pathology","sample transfer":"pathology","asset movement":"assets",pathology:"pathology",gases:"gases","general items":"general-items","ad-hoc":"general-items"};o.value&&t(o,n,a,l),o.addEventListener("change",(function(){e(this),"none"!==document.getElementById("item-type-row").style.display&&t(this,n,a,l)})),o.value&&o.dispatchEvent(new Event("change"))}}()}))}();