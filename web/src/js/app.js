!function(){"use strict";function e(e){const t=e.options[e.selectedIndex]?.text?.toLowerCase()||"",o=document.getElementById("item-type-row"),n=document.getElementById("transport-type-row"),l=document.getElementById("item-type"),s=document.getElementById("transport-type"),a=document.getElementById("to-department"),r=document.getElementById("from-department");"samples"===t?a&&Array.from(a.options).forEach((e=>{"pathology"===e.text.toLowerCase()&&(a.value=e.value)})):"pathology"===t&&r&&Array.from(r.options).forEach((e=>{"pathology"===e.text.toLowerCase()&&(r.value=e.value)})),t.includes("patient")?(o&&(o.style.display="none"),n&&(n.style.display=""),l&&(l.required=!1),s&&(s.required=!0)):(o&&(o.style.display=""),n&&(n.style.display="none"),l&&(l.required=!0),s&&(s.required=!1))}function t(e,t,o,n){if(!e.value)return;const l=e.options[e.selectedIndex].text.toLowerCase();let s=null;if("pathology"===l)s="pathology";else if("samples"===l)s="samples";else for(const e in n)if(l===e||l.includes(e)){s=n[e];break}console.log(`Selected category: "${l}", target group: "${s}"`),o.forEach((e=>{e.style.display="none",Array.from(e.querySelectorAll("option")).forEach((e=>{e.style.display="none"}))})),s?o.forEach((e=>{const t=e.label.toLowerCase().replace(/\s+/g,"-");(t===s||"transport-options"===s&&"patient-transfer"===t)&&(e.style.display="",Array.from(e.querySelectorAll("option")).forEach((e=>{e.style.display=""})),console.log(`Showing optgroup: ${e.label}`))})):(console.log("No specific match found, showing all optgroups"),o.forEach((e=>{e.style.display="",Array.from(e.querySelectorAll("option")).forEach((e=>{e.style.display=""}))}))),t.value=""}document.addEventListener("DOMContentLoaded",(function(){(function(){const e=document.getElementById("time-received");if(e){const t=()=>{const t=new Date;let o=t.getHours().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");e.value=`${o}:${n}`};t(),setInterval(t,6e4)}})(),function(){document.getElementById("task-form");const t=document.getElementById("job-category"),o=document.getElementById("pending-button"),n=document.getElementById("completed-button");o&&o.addEventListener("click",(function(e){})),n&&n.addEventListener("click",(function(e){})),t&&(t.addEventListener("change",(function(){e(this)})),t.value&&e(t))}(),document.querySelectorAll(".task-item").forEach((e=>{e.addEventListener("click",(function(){this.getAttribute("data-task-id")}))})),function(){const o=document.getElementById("job-category"),n=document.getElementById("item-type");if(o&&n){const l=n.querySelectorAll("optgroup"),s={"patient transfer":"transport-options",samples:"samples","sample transfer":"samples","asset movement":"assets",pathology:"pathology",gases:"gases","general items":"general-items","ad-hoc":"general-items"};o.value&&t(o,n,l,s),o.addEventListener("change",(function(){e(this),"none"!==document.getElementById("item-type-row").style.display&&t(this,n,l,s)})),o.value&&o.dispatchEvent(new Event("change"))}}()}))}();